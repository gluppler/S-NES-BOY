# 1.4 Game Boy Boot Process

## System Applicability

**This document applies to:**
- ✅ **Game Boy (DMG): Primary focus
- ✅ **Game Boy Color (CGB): Differences explicitly labeled
- ❌ **NES/SNES: Does not apply (different boot process)

## Physical Hardware Overview

The Game Boy boot process initializes hardware and transfers control from the boot ROM to cartridge ROM. The boot ROM is located in the Game Boy hardware and executes before the cartridge code.

Boot ROM sequence:
1. Hardware initialization
2. Nintendo logo scroll animation
3. Logo verification
4. Cartridge header validation
5. Transfer control to cartridge ($0100)

## Game Boy Terminology Definitions

* **Boot ROM: Hardware ROM in Game Boy ($0000-$00FF)
* **Cartridge Entry Point: First instruction in cartridge ROM ($0100)
* **Nintendo Logo: 48-byte logo data in cartridge header ($0104-$0133)
* **Header: Cartridge metadata ($0100-$014F)
* **Checksum: Header checksum validation ($014D)

## Core Rules and Invariants

### Boot ROM Execution

* Boot ROM executes from $0000-$00FF
* Boot ROM performs hardware initialization
* Boot ROM displays Nintendo logo scroll
* Boot ROM verifies logo data matches expected values
* Boot ROM validates cartridge header checksum
* Boot ROM transfers control to cartridge at $0100

### Cartridge Entry Point

* Cartridge code must start at $0100
* First 4 bytes: `nop; jp $0150` (standard entry)
* $0104-$0133: Nintendo logo data (48 bytes, must match boot ROM)
* $0134-$0143: Game title (16 bytes, uppercase ASCII)
* $014D: Header checksum (validated by boot ROM)

### Boot ROM Disable

* Boot ROM is disabled after transfer to cartridge
* Boot ROM memory ($0000-$00FF) becomes inaccessible
* Cartridge ROM bank 0 becomes accessible at $0000-$3FFF

## Minimal Correct Usage Example

```asm
; Standard cartridge entry point
SECTION "Reset", ROM0[$0000]
    nop
    jp Start

SECTION "Header", ROM0[$0100]
    nop
    jp Start
    
    ; Nintendo logo (48 bytes)
    DB $CE, $ED, $66, $66, $CC, $0D, $00, $0B
    DB $03, $73, $00, $83, $00, $0C, $00, $0D
    DB $00, $08, $11, $1F, $88, $89, $00, $0E
    DB $DC, $CC, $6E, $E6, $DD, $DD, $D9, $99
    DB $BB, $BB, $67, $63, $6E, $0E, $EC, $CC
    DB $DD, $DC, $99, $9F, $BB, $B9, $33, $3E
    
    ; Game title (16 bytes)
    DB "HELLO WORLD    "
    
    ; Manufacturer code
    DB $00, $00
    
    ; CGB flag
    DB $00  ; DMG compatible
    
    ; Licensee code
    DB $00
    
    ; SGB flag
    DB $00  ; No SGB features
    
    ; Cartridge type
    DB $00  ; ROM only
    
    ; ROM size
    DB $00  ; 32 KB
    
    ; RAM size
    DB $00  ; No RAM
    
    ; Destination code
    DB $01  ; Non-Japanese
    
    ; Old licensee code
    DB $00
    
    ; Version number
    DB $00
    
    ; Header checksum
    DB $00  ; Must be calculated
    
    ; Global checksum
    DW $0000  ; Must be calculated

SECTION "Start", ROM0[$0150]
Start:
    ; Game initialization
    di
    ld sp, $FFFE
    ; ... rest of initialization
```

## Gold Standard Example

```asm
; Complete Game Boy boot process example
SECTION "Reset", ROM0[$0000]
    ; Boot ROM entry point (not used in cartridge)
    nop
    jp Start

SECTION "Header", ROM0[$0100]
    ; Cartridge entry point
    nop
    jp Start
    
    ; Nintendo logo (48 bytes, must match boot ROM)
    ; Per Pan Docs: Boot ROM verifies this data
    DB $CE, $ED, $66, $66, $CC, $0D, $00, $0B
    DB $03, $73, $00, $83, $00, $0C, $00, $0D
    DB $00, $08, $11, $1F, $88, $89, $00, $0E
    DB $DC, $CC, $6E, $E6, $DD, $DD, $D9, $99
    DB $BB, $BB, $67, $63, $6E, $0E, $EC, $CC
    DB $DD, $DC, $99, $9F, $BB, $B9, $33, $3E
    
    ; Game title (16 bytes, uppercase ASCII, space-padded)
    DB "HELLO WORLD    "
    
    ; Manufacturer code (2 bytes, $00 $00 for older games)
    DB $00, $00
    
    ; CGB flag ($80 = CGB, $00 = DMG, $C0 = CGB+DMG)
    DB $00  ; DMG compatible
    
    ; New licensee code (2 bytes, $00 $00 = use old code)
    DB $00, $00
    
    ; SGB flag ($03 = SGB functions, $00 = no SGB)
    DB $00  ; No SGB features
    
    ; Cartridge type ($00 = ROM only, see Pan Docs for others)
    DB $00  ; ROM only, no MBC
    
    ; ROM size ($00 = 32 KB, $01 = 64 KB, etc.)
    DB $00  ; 32 KB (2 banks)
    
    ; RAM size ($00 = no RAM, $01 = 2 KB, etc.)
    DB $00  ; No RAM
    
    ; Destination code ($00 = Japanese, $01 = non-Japanese)
    DB $01  ; Non-Japanese
    
    ; Old licensee code ($33 = check new code)
    DB $33
    
    ; Version number
    DB $00
    
    ; Header checksum (calculated, validated by boot ROM)
    DB $00  ; Must be calculated: sum of $0134-$014C, then $00 - sum
    
    ; Global checksum (16-bit, not validated by boot ROM)
    DW $0000  ; Sum of all ROM bytes except checksum bytes

SECTION "Start", ROM0[$0150]
Start:
    ; Per Pan Docs: Boot ROM transfers control here
    ; Initialize system
    di              ; Disable interrupts
    ld sp, $FFFE    ; Initialize stack
    
    ; Wait for VBlank
    call wait_vblank
    
    ; Disable LCD
    xor a
    ld [rLCDC], a
    
    ; Clear memory
    call clear_wram
    call clear_vram
    call clear_oam
    
    ; Initialize game
    call init_game
    
    ; Enable LCD
    ld a, %10010001
    ld [rLCDC], a
    
    ; Enable interrupts
    ld a, %00000001
    ld [rIE], a
    ei
    
    jp main_loop

wait_vblank:
    ld a, [rLY]
    cp 144
    jr c, wait_vblank
    ret
```

## Validation Rules

### Boot Process Requirements

1. **Entry Point: Cartridge code must start at $0100
2. **Logo Data: Nintendo logo ($0104-$0133) must match boot ROM
3. **Header Checksum: Must be calculated correctly
4. **Stack Initialization: Stack pointer must be set early
5. **Interrupt Disable: Interrupts must be disabled at start

### Failure Modes

* **Incorrect Logo Data: Boot ROM fails verification, system locks
* **Invalid Header Checksum: Boot ROM fails validation
* **Missing Entry Point: System does not transfer to cartridge
* **Uninitialized Stack: Stack operations corrupt memory

## Cross-References

- Related Fundamentals: 1.1 (Game Boy System Overview), 1.3 (Memory Fundamentals)
- Related Advanced Fundamentals: 2.1 (CPU Timing)
