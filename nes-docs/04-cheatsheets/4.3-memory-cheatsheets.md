# 4.3 Memory Cheatsheets

## System Applicability

**This cheatsheet applies to:
- ✅ **NES: Primary focus
- ✅ **: Fully compatible (identical memory map)
- ❌ **SNES: Does not apply (SNES has different memory map with 24-bit addressing)

**Note: SNES memory map is completely different (128 KB RAM, different address ranges, 24-bit addressing). This cheatsheet covers NES/ memory only.

## CPU Memory Map ($0000–$FFFF)

| Address Range | Size | Description | Notes |
|--------------|------|-------------|-------|
| $0000–$00FF | 256 B | Zero Page | Fast addressing (3 cycles) |
| $0100–$01FF | 256 B | Stack | Fixed location, grows downward |
| $0200–$07FF | 1.5 KB | RAM | Work RAM (mirrored 4×) |
| $0800–$1FFF | 6 KB | RAM Mirror | Mirrors $0000–$07FF |
| $2000–$2007 | 8 B | PPU Registers | Mirrored every 8 bytes |
| $2008–$3FFF | 7.992 KB | PPU Mirror | Mirrors $2000–$2007 |
| $4000–$401F | 32 B | APU/I/O | APU, controllers, expansion |
| $4020–$5FFF | 8 KB | Cartridge Expansion | Mapper-specific |
| $6000–$7FFF | 8 KB | Cartridge RAM | Optional SRAM (battery) |
| $8000–$BFFF | 16 KB | Cartridge PRG ROM | Bank 0 (or mirrored) |
| $C000–$FFFF | 16 KB | Cartridge PRG ROM | Bank 1 (or mirror of $8000) |

## PPU Memory Map ($0000–$3FFF)

| Address Range | Size | Description |
|--------------|------|-------------|
| $0000–$0FFF | 4 KB | Pattern Table 0 |
| $1000–$1FFF | 4 KB | Pattern Table 1 |
| $2000–$23FF | 1 KB | Name Table 0 |
| $2400–$27FF | 1 KB | Name Table 1 |
| $2800–$2BFF | 1 KB | Name Table 2 |
| $2C00–$2FFF | 1 KB | Name Table 3 |
| $3000–$3EFF | 3.75 KB | Mirrors of $2000–$2EFF |
| $3F00–$3F1F | 32 B | Palette RAM |
| $3F20–$3FFF | 224 B | Mirrors of $3F00–$3F1F |

## Common Zero-Page Allocations

| Address | Typical Use | Notes |
|---------|-----------|-------|
| $00–$0F | Temporary variables | Scratch space |
| $10–$1F | Pointers | 16-bit pointers (low, high) |
| $20–$2F | Game state | Player position, flags |
| $30–$3F | Entity data | Entity indices, counters |
| $40–$4F | Rendering | OAM index, tile buffers |
| $50–$5F | Audio | Sound effect queues |
| $60–$6F | Input | Controller state, edge detection |
| $70–$7F | Math | Multiplication/division temps |
| $80–$8F | Subroutine params | Function arguments |
| $90–$9F | Reserved | System use |
| $A0–$AF | Reserved | System use |
| $B0–$BF | Reserved | System use |
| $C0–$CF | Reserved | System use |
| $D0–$DF | Reserved | System use |
| $E0–$EF | Reserved | System use |
| $F0–$FF | Reserved | System use |

## APU/I/O Registers ($4000–$401F)

| Address | Name | R/W | Description |
|---------|------|-----|-------------|
| $4000 | Pulse 1 Control | W | Duty, volume, envelope |
| $4001 | Pulse 1 Sweep | W | Sweep unit |
| $4002 | Pulse 1 Timer Low | W | Period low byte |
| $4003 | Pulse 1 Timer High | W | Period high, length counter |
| $4004 | Pulse 2 Control | W | Duty, volume, envelope |
| $4005 | Pulse 2 Sweep | W | Sweep unit |
| $4006 | Pulse 2 Timer Low | W | Period low byte |
| $4007 | Pulse 2 Timer High | W | Period high, length counter |
| $4008 | Triangle Control | W | Linear counter control |
| $4009 | Triangle Unused | — | Unused |
| $400A | Triangle Timer Low | W | Period low byte |
| $400B | Triangle Timer High | W | Period high, length counter |
| $400C | Noise Control | W | Volume, envelope |
| $400D | Noise Unused | — | Unused |
| $400E | Noise Period | W | Period, mode |
| $400F | Noise Length | W | Length counter |
| $4010 | DMC Control | W | IRQ, loop, period |
| $4011 | DMC Value | W | Direct load |
| $4012 | DMC Address | W | Sample address |
| $4013 | DMC Length | W | Sample length |
| $4014 | OAM DMA | W | OAM DMA high byte |
| $4015 | APU Status | R/W | Channel enable, status |
| $4016 | Controller 1 | R/W | Strobe (W), data (R) |
| $4017 | Controller 2 / Frame Counter | R/W | Data (R), frame counter (W) |

## Stack Layout ($0100–$01FF)

| Address | Usage | Notes |
|---------|-------|-------|
| $01FF | Top of stack | Initial SP = $FF |
| $01FE | — | Grows downward |
| ... | — | ... |
| $0101 | — | ... |
| $0100 | Bottom of stack | SP wraps to $FF |

**Stack Operations:
- Push: SP--, write to [SP]
- Pull: Read from [SP], SP++
- Initial SP: $FF (points to $01FF)
- Stack wraps: $00 → $FF (no hardware protection)

## Memory Access Patterns

| Pattern | Zero Page | Absolute | Savings |
|---------|-----------|----------|---------|
| Load | 3 cycles | 4 cycles | 1 cycle |
| Store | 3 cycles | 4 cycles | 1 cycle |
| Indexed | 4 cycles | 5 cycles | 1 cycle |
| Indexed (page cross) | 4 cycles | 6 cycles | 2 cycles |

## Critical Notes

- **Zero page wrap: $00FF + 1 = $0000 (no page crossing)
- **Stack location: Fixed at $0100–$01FF, cannot be relocated
- **PPU register mirroring: $2000–$2007 mirrored every 8 bytes to $3FFF
- **RAM mirroring: $0000–$07FF mirrored 4× to $1FFF
- **PRG ROM mirroring: 16 KB PRG ROM mirrored to $C000–$FFFF
- **VRAM access: Only during VBlank or forced blanking

## Cross-References

- Related Fundamentals: 1.3 (Memory Fundamentals), 1.2 (6502 CPU Fundamentals)
- Related Advanced Fundamentals: 2.1 (CPU Timing & Cycles)
- Related Core Concepts: 3.2 (Data-Oriented Design)
- Related Cheatsheets: 4.1 (CPU Cheatsheets), 4.2 (PPU Cheatsheets)
